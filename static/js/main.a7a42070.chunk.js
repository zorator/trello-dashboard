(this["webpackJsonptrello-dashboard"]=this["webpackJsonptrello-dashboard"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),i=n.n(c),s=(n(96),n(97),n(98),n(7)),o=n(62),l=n.n(o),d=n(75),u=n(31),b=n(1),j=n(43),m=n.n(j),f=function(e,t){var n=new URLSearchParams(Object(b.a)(Object(b.a)({},t),{},{key:j.Trello.key(),token:j.Trello.token()}));return fetch("https://api.trello.com/1/"+e+"?"+n,{method:"GET",mode:"cors",referrerPolicy:"no-referrer",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()}))},O={},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return e.reduce((function(e,a){var r=a[t];return e[r]=[].concat(Object(u.a)(e[r]||[]),[n(a)]),e}),{})},p=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,r,c,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("members/me/boards",{lists:"open",organization:!0});case 2:return t=e.sent,e.next=5,f("members/me/cards");case 5:return n=e.sent,a=h(n,"idList"),r=t.map((function(e){return e.lists.forEach((function(e){e.cards=a[e.id]||[]})),e})),c=h(r,"idOrganization"),i=Object.keys(c).reduce((function(e,t){var n=c[t][0].organization;return n&&(e.push(Object(b.a)(Object(b.a)({},n),{},{boards:c[t]})),delete c[n.id]),e}),[]),(s=Array.prototype.concat.apply([],Object.values(c))).length>0&&i.push({id:"private",displayName:"Private Organization",boards:s}),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x={getHierarchy:p,getMember:function(e){return void 0===O[e]&&(O[e]=f("members/"+e)),O[e]}},g=n(122),v=n(123),y=n(124),N=n(125),k=n(118);var z=function(e,t){var n=localStorage.getItem(e),r=n?JSON.parse(n):t,c=Object(a.useState)(r),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){o?localStorage.setItem(e,JSON.stringify(o)):localStorage.removeItem(e)}),[e,o]),[o,l]},_=n(2);var C=function(e){var t=e.organizations,n=e.onFilterChange,r=Object(a.useState)(!1),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)([]),d=Object(s.a)(l,2),u=d[0],j=d[1],m=z("filter",[]),f=Object(s.a)(m,2),O=f[0],h=f[1];return Object(a.useEffect)((function(){j(t.map((function(e){return{title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-organization"})," ",e.displayName]}),key:e.id,children:e.boards.map((function(e){return{title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-board"})," ",e.name]}),key:e.id,children:e.lists.map((function(e){return{title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-list"})," ",e.name]}),key:e.id}}))}}))}})))}),[t]),Object(a.useEffect)((function(){n(t.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{boards:e.boards.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.filter((function(e){return O.includes(e.id)})).filter((function(e){return e.cards.length>0}))})})).filter((function(e){return e.lists.length>0}))})})).filter((function(e){return e.boards.length>0})))}),[n,O,t]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y.a,{type:"primary",onClick:function(){return o(!i)},children:"Open Filter"}),Object(_.jsx)(N.a,{title:"Filter",placement:"left",onClose:function(){return o(!1)},visible:i,children:Object(_.jsx)(k.a,{selectable:!1,checkable:!0,checkedKeys:O,onCheck:h,treeData:u})})]})},S=n(121);function E(e){var t=e.element;return Object(_.jsx)(S.a.Link,{href:"#".concat(t.key),style:{whiteSpace:"normal"},title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm ".concat(t.icon)})," ",t.title]}),children:(t.children||[]).map((function(e){return Object(_.jsx)(E,{element:e},e.key)}))})}var F=function(e){var t=e.organizations,n=Object(a.useState)([]),r=Object(s.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){i(t.map((function(e){return{title:e.displayName,key:e.id,icon:"icon-organization",children:e.boards.map((function(e){return{title:e.name,key:e.id,icon:"icon-board",children:e.lists.map((function(e){return{title:e.name,key:e.id,icon:"icon-list"}}))}}))}})))}),[t]),Object(_.jsx)(S.a,{offsetTop:72,children:c.map((function(e){return Object(_.jsx)(E,{element:e},e.key)}))})},w=n(120),L=n(64),M=n.n(L),T=n(65),B=n.n(T);var I=function(e){var t=e.idMembers,n=Object(a.useState)([]),r=Object(s.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){Promise.all(t.map(x.getMember)).then(i)}),[t]),Object(_.jsx)("div",{className:"list-card-members",children:c.map((function(e){return Object(_.jsx)("div",{className:"member",children:e.avatarUrl?Object(_.jsx)("img",{className:"member-avatar",height:"30",width:"30",src:"".concat(e.avatarUrl,"/30.png"),alt:"".concat(e.fullName," (").concat(e.username,")"),title:"".concat(e.fullName," (").concat(e.username,")")}):Object(_.jsx)("span",{className:"member-initials",title:"".concat(e.fullName," (").concat(e.username,")"),"aria-label":"".concat(e.fullName," (").concat(e.username,")"),children:e.initials})},e.id)}))})},H=["green","yellow","orange","red","purple","blue","pink","sky","lime","black"];var J=function(e){var t=function(e){var t=e||[];return t.sort((function(e,t){return H.indexOf(e.color)-H.indexOf(t.color)})),t}(e.labels);return Object(_.jsx)("div",{className:"list-card-labels",children:t.map((function(e){return Object(_.jsx)("span",{className:"card-label card-label-".concat(e.color," mod-card-front"),title:e.name,children:Object(_.jsx)("span",{className:"label-text",children:e.name})},e.id)}))})};var P=function(e){var t=e.data,n=e.list,a=e.isFirst;return Object(_.jsx)("a",{className:["list-card",B.a.Card].join(" "),href:t.url,target:"_blank",rel:"noreferrer",children:Object(_.jsxs)("div",{className:"list-card-details",id:a?n.id:null,children:[Object(_.jsx)(J,{labels:t.labels}),Object(_.jsx)("span",{className:"list-card-title",dir:"auto",children:t.name}),Object(_.jsx)(I,{idMembers:t.idMembers}),n?Object(_.jsxs)("div",{className:B.a.CardListName,children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-list"})," ",n.name]}):null]})})};var A=function(e){var t=e.data;return Object(_.jsxs)("div",{className:M.a.Board,id:t.id,children:[Object(_.jsxs)("h3",{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-board"})," ",Object(_.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.name})]}),Object(_.jsx)("div",{className:M.a.cardContainer,children:t.lists.flatMap((function(e){return e.cards.map((function(t,n){return Object(_.jsx)(P,{data:t,list:e,isFirst:0===n},t.id)}))}))})]})},K=n(88),U=n.n(K);function D(e){var t=e.data;return Object(_.jsxs)("div",{className:U.a.Organization,id:t.id,children:[Object(_.jsxs)("h2",{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-organization"})," ",Object(_.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.displayName})]}),t.boards.map((function(e){return Object(_.jsx)(A,{data:e},e.id)}))]})}var G=function(e){var t=e.organizations;return 0===t.length?Object(_.jsx)(w.a,{title:"No cards found, try adding some organizations / boards / lists from the filter panel"}):t.map((function(e){return Object(_.jsx)(D,{data:e},e.id)}))};var R=function(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)([]),u=Object(s.a)(d,2),b=u[0],j=u[1];return Object(a.useEffect)((function(){x.getHierarchy().then((function(e){l(e),r(!1)}))}),[]),Object(_.jsxs)(g.a,{children:[Object(_.jsx)(g.a.Header,{style:{position:"fixed",zIndex:1,width:"100%"},children:Object(_.jsx)(C,{organizations:o,onFilterChange:j})}),Object(_.jsxs)(g.a,{style:{marginTop:64,minHeight:"calc(100vh - 64px)"},children:[Object(_.jsx)(g.a.Sider,{style:{padding:8,background:"#fff"},children:Object(_.jsx)(F,{organizations:b})}),Object(_.jsxs)(g.a,{children:[Object(_.jsx)(g.a.Content,{className:"body-card-label-text",style:{padding:8},children:Object(_.jsx)(v.a,{active:!0,loading:n,children:Object(_.jsx)(G,{organizations:b,loading:n})})}),Object(_.jsxs)(g.a.Footer,{children:["Made with \ud83c\udf7a by ",Object(_.jsx)("a",{href:"https://github.com/zorator/trello-dashboard",children:"@zorator"})]})]})]})]})},V=n(89),W=n.n(V);i.a.render(Object(_.jsxs)(r.a.StrictMode,{children:[Object(_.jsx)(m.a,{apiKey:W.a.api_key,clientVersion:1,apiEndpoint:"https://api.trello.com",authEndpoint:"https://trello.com",intentEndpoint:"https://trello.com",authorizeName:"Trello Dashboard",authorizeType:"redirect",authorizeOnSuccess:function(){return console.log("Login successful!")},authorizeOnError:function(){return console.log("Login error!")},autoAuthorize:!0}),Object(_.jsx)(R,{})]}),document.getElementById("root"))},64:function(e,t,n){e.exports={cardContainer:"Board_cardContainer__8bmzk",Board:"Board_Board__Zn9WF"}},65:function(e,t,n){e.exports={Card:"Card_Card__2v91Y",CardListName:"Card_CardListName__2Bhvf"}},88:function(e,t,n){e.exports={Organization:"Organization_Organization__Klhcw"}},89:function(e,t){e.exports={api_key:"eca89f23d50dfcceeda83f5dafb7f501"}},96:function(e,t,n){},97:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.a7a42070.chunk.js.map