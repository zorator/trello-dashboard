(this["webpackJsonptrello-dashboard"]=this["webpackJsonptrello-dashboard"]||[]).push([[0],{117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),i=a.n(c),s=(a(97),a(98),a(99),a(7)),o=a(25),l=a(1),d=a(44),u=a.n(d),j=function(e,t){var a=new URLSearchParams(Object(l.a)(Object(l.a)({},t),{},{key:d.Trello.key(),token:d.Trello.token()}));return fetch("https://api.trello.com/1/"+e+"?"+a,{method:"GET",mode:"cors",referrerPolicy:"no-referrer",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()}))},b=void 0,f={},m=function(){return void 0===b&&(b=j("members/me/cards")),b},h=function(e){return m().then((function(t){return t.filter((function(t){return t.idList===e}))}))},O=function(){return Promise.all([j("members/me/organizations"),j("members/me/boards",{lists:"open"}),m()]).then((function(e){var t=Object(s.a)(e,3),a=t[0],n=t[1],r=t[2].reduce((function(e,t){return e[t.idList]=[].concat(Object(o.a)(e[t.idList]||[]),[t]),e}),{}),c=n.reduce((function(e,t){return t.lists.forEach((function(e){e.cards=r[e.id]||[]})),e[t.idOrganization]=[].concat(Object(o.a)(e[t.idOrganization]||[]),[t]),e}),{});return a.map((function(e){return e.boards=c[e.id]||[],e}))}))},p=function(e){return void 0===f[e]&&(f[e]=j("members/"+e)),f[e]},x=a(60),g=a.n(x),v=a(73),N=a(74),k=a(75),y=a.n(k),_=a(2);var z=function(e){var t=e.data,a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],i=r[1];Object(n.useEffect)((function(){function e(){return(e=Object(N.a)(g.a.mark((function e(){var a,n,r,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(v.a)(t.idMembers),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=12;break}return c=r.value,e.next=8,p(c);case 8:s=e.sent,a.push(s);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:i(a);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.idMembers]);var o=t.labels||[];return Object(_.jsx)("a",{className:[y.a.Card,"list-card"].join(" "),href:t.url,target:"_blank",rel:"noreferrer",children:Object(_.jsxs)("div",{className:"list-card-details",children:[Object(_.jsx)("div",{className:"list-card-labels",children:o.map((function(e){return Object(_.jsx)("span",{className:"card-label card-label-".concat(e.color," mod-card-front"),title:e.name,children:Object(_.jsx)("span",{className:"label-text",children:e.name})},e.id)}))}),Object(_.jsx)("span",{className:"list-card-title",dir:"auto",children:t.name}),Object(_.jsx)("div",{className:"badges",children:Object(_.jsx)("span",{className:"js-badges",children:Object(_.jsxs)("div",{className:"badge js-checkitems-badge",title:"\xc9l\xe9ments de checklist",children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-checklist"}),Object(_.jsx)("span",{className:"badge-text js-checkitems-badge-text",children:"0/3"})]})})}),Object(_.jsx)("div",{className:"list-card-members",children:c.map((function(e){return Object(_.jsx)("div",{className:"member",children:e.avatarUrl?Object(_.jsx)("img",{className:"member-avatar",height:"30",width:"30",src:"".concat(e.avatarUrl,"/30.png"),alt:"".concat(e.fullName," (").concat(e.username,")"),title:"".concat(e.fullName," (").concat(e.username,")")}):Object(_.jsx)("span",{className:"member-initials",title:"".concat(e.fullName," (").concat(e.username,")"),"aria-label":"".concat(e.fullName," (").concat(e.username,")"),children:e.initials})},e.id)}))})]})})},S=a(76),C=a.n(S);function E(e){var t=e.data,a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){h(t.id).then(i)}),[t.id]),Object(_.jsxs)("div",{className:C.a.List,id:t.id,children:[Object(_.jsx)("h4",{children:t.name}),Object(_.jsx)("div",{className:"list-cards",children:c.map((function(e){return Object(_.jsx)(z,{data:e},e.id)}))})]})}var L=a(61),w=a.n(L);function T(e){var t=e.data;return Object(_.jsxs)("div",{className:w.a.Board,id:t.id,children:[Object(_.jsx)("h3",{children:Object(_.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.name})}),Object(_.jsx)("div",{className:w.a.listContainer,children:t.lists.map((function(e){return Object(_.jsx)(E,{data:e},e.id)}))})]})}var F=a(77),B=a.n(F);function I(e){var t=e.data;return Object(_.jsxs)("div",{className:B.a.Organization,id:t.id,children:[Object(_.jsx)("h2",{children:Object(_.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.displayName})}),t.boards.map((function(e){return Object(_.jsx)(T,{data:e},e.id)}))]})}var J=a(121),K=a(122),M=a(123),P=a(124),D=a(119);var U=function(e,t){var a=localStorage.getItem(e),r=a?JSON.parse(a):t,c=Object(n.useState)(r),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){o?localStorage.setItem(e,JSON.stringify(o)):localStorage.removeItem(e)}),[e,o]),[o,l]};var A=function(e){var t=e.organizations,a=e.onFilterChange,r=Object(n.useState)(!1),c=Object(s.a)(r,2),i=c[0],o=c[1],d=Object(n.useState)([]),u=Object(s.a)(d,2),j=u[0],b=u[1],f=U("filter",[]),m=Object(s.a)(f,2),h=m[0],O=m[1];return Object(n.useEffect)((function(){b(t.map((function(e){return{title:e.displayName,key:e.id,children:e.boards.map((function(e){return{title:e.name,key:e.id,children:e.lists.map((function(e){return{title:e.name,key:e.id}}))}}))}})))}),[t]),Object(n.useEffect)((function(){a(t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{boards:e.boards.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{lists:e.lists.filter((function(e){return h.includes(e.id)})).filter((function(e){return e.cards.length>0}))})})).filter((function(e){return e.lists.length>0}))})})).filter((function(e){return e.boards.length>0})))}),[a,h,t]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(M.a,{type:"primary",onClick:function(){return o(!i)},children:"Open Filter"}),Object(_.jsx)(P.a,{title:"Filter",placement:"left",onClose:function(){return o(!1)},visible:i,children:Object(_.jsx)(D.a,{selectable:!1,checkable:!0,checkedKeys:h,onCheck:O,treeData:j})})]})},G=a(89),H=a.n(G),R=function e(t){return Object(_.jsx)(J.a.Link,{href:"#".concat(t.id),style:{whiteSpace:"normal"},title:t.displayName||t.name,children:(t.boards||t.lists||[]).map(e)},t.id)};var V=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){O().then(r)}),[]),Object(_.jsxs)(K.a,{children:[Object(_.jsxs)(K.a.Header,{style:{position:"fixed",zIndex:1,width:"100%"},children:[">",Object(_.jsx)(u.a,{apiKey:H.a.api_key,clientVersion:1,apiEndpoint:"https://api.trello.com",authEndpoint:"https://trello.com",intentEndpoint:"https://trello.com",authorizeName:"Trello Dashboard",authorizeType:"redirect",authorizeOnSuccess:function(){return console.log("Login successful!")},authorizeOnError:function(){return console.log("Login error!")},autoAuthorize:!0}),Object(_.jsx)(A,{organizations:a,onFilterChange:l})]}),Object(_.jsxs)(K.a,{style:{marginTop:64},children:[Object(_.jsx)(K.a.Sider,{style:{padding:8,background:"#fff"},children:Object(_.jsx)(J.a,{offsetTop:72,children:o.map(R)})}),Object(_.jsxs)(K.a,{style:{padding:8},children:[Object(_.jsx)(K.a.Content,{className:"body-card-label-text",children:o.map((function(e){return Object(_.jsx)(I,{data:e},e.id)}))}),Object(_.jsxs)(K.a.Footer,{children:["Made with \ud83c\udf7a by ",Object(_.jsx)("a",{href:"https://github.com/zorator/trello-dashboard",children:"@zorator"})]})]})]})]})};i.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(V,{})}),document.getElementById("root"))},61:function(e,t,a){e.exports={listContainer:"Board_listContainer__3_rCD",Board:"Board_Board__Zn9WF"}},75:function(e,t,a){e.exports={Card:"Card_Card__1k9eP"}},76:function(e,t,a){e.exports={List:"List_List__9rKos"}},77:function(e,t,a){e.exports={Organization:"Organization_Organization__Klhcw"}},89:function(e,t){e.exports={api_key:"eca89f23d50dfcceeda83f5dafb7f501"}},97:function(e,t,a){},98:function(e,t,a){}},[[117,1,2]]]);
//# sourceMappingURL=main.1814032a.chunk.js.map