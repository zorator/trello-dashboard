(this["webpackJsonptrello-dashboard"]=this["webpackJsonptrello-dashboard"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(32),i=n.n(c),s=(n(96),n(97),n(98),n(7)),o=n(25),l=n(1),d=n(44),u=n.n(d),b=function(e,t){var n=new URLSearchParams(Object(l.a)(Object(l.a)({},t),{},{key:d.Trello.key(),token:d.Trello.token()}));return fetch("https://api.trello.com/1/"+e+"?"+n,{method:"GET",mode:"cors",referrerPolicy:"no-referrer",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()}))},j=void 0,m={},f=function(){return Promise.all([b("members/me/organizations"),b("members/me/boards",{lists:"open"}),(void 0===j&&(j=b("members/me/cards")),j)]).then((function(e){var t=Object(s.a)(e,3),n=t[0],a=t[1],r=t[2].reduce((function(e,t){return e[t.idList]=[].concat(Object(o.a)(e[t.idList]||[]),[t]),e}),{}),c=a.reduce((function(e,t){return t.lists.forEach((function(e){e.cards=r[e.id]||[]})),e[t.idOrganization]=[].concat(Object(o.a)(e[t.idOrganization]||[]),[t]),e}),{});return n.map((function(e){return e.boards=c[e.id]||[],e}))}))},h=function(e){return void 0===m[e]&&(m[e]=b("members/"+e)),m[e]},O=n(60),p=n.n(O),x=n(61),g=n.n(x),v=n(75),N=n(76),y=n(62),k=n.n(y),z=n(2);var _=function(e){var t=e.data,n=e.list,r=Object(a.useState)([]),c=Object(s.a)(r,2),i=c[0],o=c[1];Object(a.useEffect)((function(){function e(){return(e=Object(N.a)(g.a.mark((function e(){var n,a,r,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object(v.a)(t.idMembers),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=12;break}return c=r.value,e.next=8,h(c);case 8:i=e.sent,n.push(i);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:o(n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.idMembers]);var l=t.labels||[];return Object(z.jsx)("a",{className:[k.a.Card,"list-card"].join(" "),href:t.url,target:"_blank",rel:"noreferrer",children:Object(z.jsxs)("div",{className:"list-card-details",children:[Object(z.jsx)("div",{className:"list-card-labels",children:l.map((function(e){return Object(z.jsx)("span",{className:"card-label card-label-".concat(e.color," mod-card-front"),title:e.name,children:Object(z.jsx)("span",{className:"label-text",children:e.name})},e.id)}))}),Object(z.jsx)("span",{className:"list-card-title",dir:"auto",children:t.name}),Object(z.jsx)("div",{className:"list-card-members",children:i.map((function(e){return Object(z.jsx)("div",{className:"member",children:e.avatarUrl?Object(z.jsx)("img",{className:"member-avatar",height:"30",width:"30",src:"".concat(e.avatarUrl,"/30.png"),alt:"".concat(e.fullName," (").concat(e.username,")"),title:"".concat(e.fullName," (").concat(e.username,")")}):Object(z.jsx)("span",{className:"member-initials",title:"".concat(e.fullName," (").concat(e.username,")"),"aria-label":"".concat(e.fullName," (").concat(e.username,")"),children:e.initials})},e.id)}))}),n?Object(z.jsxs)("div",{className:k.a.CardListName,children:[Object(z.jsx)("span",{className:"badge-icon icon-sm icon-list"})," ",n.name]}):null]})})};function C(e){var t=e.data;return Object(z.jsxs)("div",{className:p.a.Board,id:t.id,children:[Object(z.jsxs)("h3",{children:[Object(z.jsx)("span",{className:"badge-icon icon-sm icon-board"})," ",Object(z.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.name})]}),Object(z.jsx)("div",{className:p.a.cardContainer,children:t.lists.flatMap((function(e){return e.cards.map((function(t){return Object(z.jsx)(_,{data:t,list:e},t.id)}))}))})]})}var S=n(77),E=n.n(S);function F(e){var t=e.data;return Object(z.jsxs)("div",{className:E.a.Organization,id:t.id,children:[Object(z.jsxs)("h2",{children:[Object(z.jsx)("span",{className:"badge-icon icon-sm icon-organization"})," ",Object(z.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.displayName})]}),t.boards.map((function(e){return Object(z.jsx)(C,{data:e},e.id)}))]})}var w=n(121),L=n(122),T=n(123),B=n(118);var I=function(e,t){var n=localStorage.getItem(e),r=n?JSON.parse(n):t,c=Object(a.useState)(r),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){o?localStorage.setItem(e,JSON.stringify(o)):localStorage.removeItem(e)}),[e,o]),[o,l]};var M=function(e){var t=e.organizations,n=e.onFilterChange,r=Object(a.useState)(!1),c=Object(s.a)(r,2),i=c[0],o=c[1],d=Object(a.useState)([]),u=Object(s.a)(d,2),b=u[0],j=u[1],m=I("filter",[]),f=Object(s.a)(m,2),h=f[0],O=f[1];return Object(a.useEffect)((function(){j(t.map((function(e){return{title:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("span",{className:"badge-icon icon-sm icon-organization"})," ",e.displayName]}),key:e.id,children:e.boards.map((function(e){return{title:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("span",{className:"badge-icon icon-sm icon-board"})," ",e.name]}),key:e.id,children:e.lists.map((function(e){return{title:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("span",{className:"badge-icon icon-sm icon-list"})," ",e.name]}),key:e.id}}))}}))}})))}),[t]),Object(a.useEffect)((function(){n(t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{boards:e.boards.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{lists:e.lists.filter((function(e){return h.includes(e.id)})).filter((function(e){return e.cards.length>0}))})})).filter((function(e){return e.lists.length>0}))})})).filter((function(e){return e.boards.length>0})))}),[n,h,t]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(L.a,{type:"primary",onClick:function(){return o(!i)},children:"Open Filter"}),Object(z.jsx)(T.a,{title:"Filter",placement:"left",onClose:function(){return o(!1)},visible:i,children:Object(z.jsx)(B.a,{selectable:!1,checkable:!0,checkedKeys:h,onCheck:O,treeData:b})})]})},J=n(89),P=n.n(J),K=n(120);var U=function(e){var t=e.organizations,n=Object(a.useState)([]),r=Object(s.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){i(t.map((function(e){return{title:e.displayName,key:e.id,icon:"icon-organization",children:e.boards.map((function(e){return{title:e.name,key:e.id,icon:"icon-board",children:e.lists.map((function(e){return{title:e.name,key:e.id,icon:"icon-list"}}))}}))}})))}),[t]),Object(z.jsx)(K.a,{offsetTop:72,children:c.map((function e(t){return Object(z.jsx)(K.a.Link,{href:"#".concat(t.key),style:{whiteSpace:"normal"},title:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("span",{className:"badge-icon icon-sm ".concat(t.icon)})," ",t.title]}),children:(t.children||[]).map(e)},t.key)}))})};var A=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){f().then(r)}),[]),Object(z.jsxs)(w.a,{children:[Object(z.jsxs)(w.a.Header,{style:{position:"fixed",zIndex:1,width:"100%"},children:[Object(z.jsx)(u.a,{apiKey:P.a.api_key,clientVersion:1,apiEndpoint:"https://api.trello.com",authEndpoint:"https://trello.com",intentEndpoint:"https://trello.com",authorizeName:"Trello Dashboard",authorizeType:"redirect",authorizeOnSuccess:function(){return console.log("Login successful!")},authorizeOnError:function(){return console.log("Login error!")},autoAuthorize:!0}),Object(z.jsx)(M,{organizations:n,onFilterChange:l})]}),Object(z.jsxs)(w.a,{style:{marginTop:64},children:[Object(z.jsx)(w.a.Sider,{style:{padding:8,background:"#fff"},children:Object(z.jsx)(U,{organizations:o})}),Object(z.jsxs)(w.a,{style:{padding:8},children:[Object(z.jsx)(w.a.Content,{className:"body-card-label-text",children:o.map((function(e){return Object(z.jsx)(F,{data:e},e.id)}))}),Object(z.jsxs)(w.a.Footer,{children:["Made with \ud83c\udf7a by ",Object(z.jsx)("a",{href:"https://github.com/zorator/trello-dashboard",children:"@zorator"})]})]})]})]})};i.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(A,{})}),document.getElementById("root"))},60:function(e,t,n){e.exports={cardContainer:"Board_cardContainer__8bmzk",Board:"Board_Board__Zn9WF"}},62:function(e,t,n){e.exports={Card:"Card_Card__1k9eP",CardListName:"Card_CardListName__1s_mZ"}},77:function(e,t,n){e.exports={Organization:"Organization_Organization__Klhcw"}},89:function(e,t){e.exports={api_key:"eca89f23d50dfcceeda83f5dafb7f501"}},96:function(e,t,n){},97:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.43b5ff84.chunk.js.map