(this["webpackJsonptrello-dashboard"]=this["webpackJsonptrello-dashboard"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),i=n.n(c),s=(n(97),n(98),n(99),n(7)),o=n(43),l=n.n(o),d=n(52),u=n(31),b=n(1),j=n(45),m=n.n(j),f=function(e,t){var n=new URLSearchParams(Object(b.a)(Object(b.a)({},t),{},{key:j.Trello.key(),token:j.Trello.token()}));return fetch("https://api.trello.com/1/"+e+"?"+n,{method:"GET",mode:"cors",referrerPolicy:"no-referrer",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()}))},h={},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return e.reduce((function(e,a){var r=a[t];return e[r]=[].concat(Object(u.a)(e[r]||[]),[n(a)]),e}),{})},O=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,r,c,i,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("members/me/organizations");case 2:return t=e.sent,e.next=5,f("members/me/boards",{lists:"open"});case 5:return n=e.sent,e.next=8,f("members/me/cards");case 8:return a=e.sent,r=p(a,"idList"),c=n.map((function(e){return e.lists.forEach((function(e){e.cards=r[e.id]||[]})),e})),i=p(c,"idOrganization"),s=t.map((function(e){return e.boards=i[e.id]||[],delete i[e.id],e})),(o=Array.prototype.concat.apply([],Object.values(i))).length>0&&s.push({id:"private",displayName:"Private Organization",boards:o}),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x={getHierarchy:O,getMember:function(e){return void 0===h[e]&&(h[e]=f("members/"+e)),h[e]}},g=n(123),v=n(124),y=n(125),N=n(126),k=n(119);var z=function(e,t){var n=localStorage.getItem(e),r=n?JSON.parse(n):t,c=Object(a.useState)(r),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){o?localStorage.setItem(e,JSON.stringify(o)):localStorage.removeItem(e)}),[e,o]),[o,l]},_=n(3);var C=function(e){var t=e.organizations,n=e.onFilterChange,r=Object(a.useState)(!1),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)([]),d=Object(s.a)(l,2),u=d[0],j=d[1],m=z("filter",[]),f=Object(s.a)(m,2),h=f[0],p=f[1];return Object(a.useEffect)((function(){j(t.map((function(e){return{title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-organization"})," ",e.displayName]}),key:e.id,children:e.boards.map((function(e){return{title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-board"})," ",e.name]}),key:e.id,children:e.lists.map((function(e){return{title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-list"})," ",e.name]}),key:e.id}}))}}))}})))}),[t]),Object(a.useEffect)((function(){n(t.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{boards:e.boards.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.filter((function(e){return h.includes(e.id)})).filter((function(e){return e.cards.length>0}))})})).filter((function(e){return e.lists.length>0}))})})).filter((function(e){return e.boards.length>0})))}),[n,h,t]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y.a,{type:"primary",onClick:function(){return o(!i)},children:"Open Filter"}),Object(_.jsx)(N.a,{title:"Filter",placement:"left",onClose:function(){return o(!1)},visible:i,children:Object(_.jsx)(k.a,{selectable:!1,checkable:!0,checkedKeys:h,onCheck:p,treeData:u})})]})},S=n(122);function E(e){var t=e.element;return Object(_.jsx)(S.a.Link,{href:"#".concat(t.key),style:{whiteSpace:"normal"},title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm ".concat(t.icon)})," ",t.title]}),children:(t.children||[]).map((function(e){return Object(_.jsx)(E,{element:e},e.key)}))})}var F=function(e){var t=e.organizations,n=Object(a.useState)([]),r=Object(s.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){i(t.map((function(e){return{title:e.displayName,key:e.id,icon:"icon-organization",children:e.boards.map((function(e){return{title:e.name,key:e.id,icon:"icon-board",children:e.lists.map((function(e){return{title:e.name,key:e.id,icon:"icon-list"}}))}}))}})))}),[t]),Object(_.jsx)(S.a,{offsetTop:72,children:c.map((function(e){return Object(_.jsx)(E,{element:e},e.key)}))})},w=n(121),L=n(65),T=n.n(L),M=n(88),B=n(66),I=n.n(B);var H=function(e){var t=e.data,n=e.list,r=e.isFirst,c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],u=i[1];Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var n,a,r,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object(M.a)(t.idMembers),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=12;break}return c=r.value,e.next=8,x.getMember(c);case 8:i=e.sent,n.push(i);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:u(n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.idMembers]);var b=t.labels||[];return Object(_.jsx)("a",{className:[I.a.Card,"list-card"].join(" "),href:t.url,target:"_blank",rel:"noreferrer",children:Object(_.jsxs)("div",{className:"list-card-details",id:r?n.id:null,children:[Object(_.jsx)("div",{className:"list-card-labels",children:b.map((function(e){return Object(_.jsx)("span",{className:"card-label card-label-".concat(e.color," mod-card-front"),title:e.name,children:Object(_.jsx)("span",{className:"label-text",children:e.name})},e.id)}))}),Object(_.jsx)("span",{className:"list-card-title",dir:"auto",children:t.name}),Object(_.jsx)("div",{className:"list-card-members",children:o.map((function(e){return Object(_.jsx)("div",{className:"member",children:e.avatarUrl?Object(_.jsx)("img",{className:"member-avatar",height:"30",width:"30",src:"".concat(e.avatarUrl,"/30.png"),alt:"".concat(e.fullName," (").concat(e.username,")"),title:"".concat(e.fullName," (").concat(e.username,")")}):Object(_.jsx)("span",{className:"member-initials",title:"".concat(e.fullName," (").concat(e.username,")"),"aria-label":"".concat(e.fullName," (").concat(e.username,")"),children:e.initials})},e.id)}))}),n?Object(_.jsxs)("div",{className:I.a.CardListName,children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-list"})," ",n.name]}):null]})})};var J=function(e){var t=e.data;return Object(_.jsxs)("div",{className:T.a.Board,id:t.id,children:[Object(_.jsxs)("h3",{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-board"})," ",Object(_.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.name})]}),Object(_.jsx)("div",{className:T.a.cardContainer,children:t.lists.flatMap((function(e){return e.cards.map((function(t,n){return Object(_.jsx)(H,{data:t,list:e,isFirst:0===n},t.id)}))}))})]})},P=n(89),A=n.n(P);function K(e){var t=e.data;return Object(_.jsxs)("div",{className:A.a.Organization,id:t.id,children:[Object(_.jsxs)("h2",{children:[Object(_.jsx)("span",{className:"badge-icon icon-sm icon-organization"})," ",Object(_.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.displayName})]}),t.boards.map((function(e){return Object(_.jsx)(J,{data:e},e.id)}))]})}var U=function(e){var t=e.organizations;return 0===t.length?Object(_.jsx)(w.a,{title:"No cards found, try adding some organizations / boards / lists from the filter panel"}):t.map((function(e){return Object(_.jsx)(K,{data:e},e.id)}))};var D=function(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)([]),u=Object(s.a)(d,2),b=u[0],j=u[1];return Object(a.useEffect)((function(){x.getHierarchy().then((function(e){l(e),r(!1)}))}),[]),Object(_.jsxs)(g.a,{children:[Object(_.jsx)(g.a.Header,{style:{position:"fixed",zIndex:1,width:"100%"},children:Object(_.jsx)(C,{organizations:o,onFilterChange:j})}),Object(_.jsxs)(g.a,{style:{marginTop:64,minHeight:"calc(100vh - 64px)"},children:[Object(_.jsx)(g.a.Sider,{style:{padding:8,background:"#fff"},children:Object(_.jsx)(F,{organizations:b})}),Object(_.jsxs)(g.a,{children:[Object(_.jsx)(g.a.Content,{className:"body-card-label-text",style:{padding:8},children:Object(_.jsx)(v.a,{active:!0,loading:n,children:Object(_.jsx)(U,{organizations:b,loading:n})})}),Object(_.jsxs)(g.a.Footer,{children:["Made with \ud83c\udf7a by ",Object(_.jsx)("a",{href:"https://github.com/zorator/trello-dashboard",children:"@zorator"})]})]})]})]})},Z=n(90),G=n.n(Z);i.a.render(Object(_.jsxs)(r.a.StrictMode,{children:[Object(_.jsx)(m.a,{apiKey:G.a.api_key,clientVersion:1,apiEndpoint:"https://api.trello.com",authEndpoint:"https://trello.com",intentEndpoint:"https://trello.com",authorizeName:"Trello Dashboard",authorizeType:"redirect",authorizeOnSuccess:function(){return console.log("Login successful!")},authorizeOnError:function(){return console.log("Login error!")},autoAuthorize:!0}),Object(_.jsx)(D,{})]}),document.getElementById("root"))},65:function(e,t,n){e.exports={cardContainer:"Board_cardContainer__8bmzk",Board:"Board_Board__Zn9WF"}},66:function(e,t,n){e.exports={Card:"Card_Card__1k9eP",CardListName:"Card_CardListName__1s_mZ"}},89:function(e,t,n){e.exports={Organization:"Organization_Organization__Klhcw"}},90:function(e,t){e.exports={api_key:"eca89f23d50dfcceeda83f5dafb7f501"}},97:function(e,t,n){},98:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.3879771c.chunk.js.map